{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core/core';\nimport { Validators } from '@angular/forms/forms';\nlet InputComponent = class InputComponent {\n  constructor(_clientService, _formBuilder) {\n    this._clientService = _clientService;\n    this._formBuilder = _formBuilder;\n    this.form = this._formBuilder.group({\n      input: ['', [Validators.required, Validators.maxLength(750)]]\n    });\n    this.passedCommandsIndex = 0;\n    this.passedCommands = [];\n  }\n\n  ngOnInit() {\n    document.onkeydown = e => {\n      switch (e.key) {\n        case \"ArrowUp\":\n          this.getPassCommand(true);\n          break;\n\n        case \"ArrowDown\":\n          this.getPassCommand(false);\n          break;\n\n        default:\n          this.passedCommandsIndex = 0;\n      }\n    };\n  }\n\n  getPassCommand(increment) {\n    let value = this.passedCommands.reverse()[this.passedCommandsIndex];\n    this.passedCommands.reverse();\n\n    if (value) {\n      this.form.get('input').setValue('');\n      setTimeout(() => {\n        this.form.get('input').setValue(value);\n      });\n    }\n\n    if (increment) {\n      if (this.passedCommandsIndex > this.passedCommands.length) {\n        this.passedCommandsIndex = this.passedCommands.length;\n      }\n\n      this.passedCommandsIndex += 1;\n    } else {\n      if (this.passedCommandsIndex < 0) {\n        this.passedCommandsIndex = 0;\n      }\n\n      this.passedCommandsIndex -= 1;\n    }\n  }\n\n  OnClickToServer(command) {\n    this._clientService.sendToServer(command);\n  }\n\n  sendToServer() {\n    this.passedCommands.push(this.cleanInput());\n\n    this._clientService.sendToServer(this.cleanInput());\n  }\n  /*\r\n      Removes html tags\r\n      Trims white space\r\n      Makes lowercase\r\n  */\n\n\n  cleanInput() {\n    return this.form.get('input').value.replace(/<[^>]*>/g, '').trim();\n  }\n\n};\n\n__decorate([ViewChild(\"inputTxt\", {\n  static: true\n})], InputComponent.prototype, \"inputTxt\", void 0);\n\nInputComponent = __decorate([Component({\n  selector: 'app-input',\n  templateUrl: './input.component.html',\n  styleUrls: ['./input.component.scss']\n})], InputComponent);\nexport { InputComponent };","map":null,"metadata":{},"sourceType":"module"}