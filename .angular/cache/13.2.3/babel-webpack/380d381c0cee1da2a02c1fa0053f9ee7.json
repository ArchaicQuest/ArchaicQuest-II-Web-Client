{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.animateNodes = exports.ANIMATE_DEFAULTS = void 0;\n\nvar index_1 = require(\"./index\");\n\nvar easings_1 = __importDefault(require(\"./easings\"));\n\nexports.ANIMATE_DEFAULTS = {\n  easing: \"quadraticInOut\",\n  duration: 150\n};\n/**\n * Function used to animate the nodes.\n */\n\nfunction animateNodes(graph, targets, opts, callback) {\n  var options = Object.assign({}, exports.ANIMATE_DEFAULTS, opts);\n  var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n  var start = Date.now();\n  var startPositions = {};\n\n  for (var node in targets) {\n    var attrs = targets[node];\n    startPositions[node] = {};\n\n    for (var k in attrs) startPositions[node][k] = graph.getNodeAttribute(node, k);\n  }\n\n  var frame = null;\n\n  var step = function () {\n    var p = (Date.now() - start) / options.duration;\n\n    if (p >= 1) {\n      // Animation is done\n      for (var node in targets) {\n        var attrs = targets[node];\n\n        for (var k in attrs) graph.setNodeAttribute(node, k, attrs[k]);\n      }\n\n      if (typeof callback === \"function\") callback();\n      return;\n    }\n\n    p = easing(p);\n\n    for (var node in targets) {\n      var attrs = targets[node];\n      var s = startPositions[node];\n\n      for (var k in attrs) graph.setNodeAttribute(node, k, attrs[k] * p + s[k] * (1 - p));\n    }\n\n    frame = (0, index_1.requestFrame)(step);\n  };\n\n  step();\n  return function () {\n    if (frame) (0, index_1.cancelFrame)(frame);\n  };\n}\n\nexports.animateNodes = animateNodes;","map":null,"metadata":{},"sourceType":"script"}