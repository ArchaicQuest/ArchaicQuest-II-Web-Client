<div class="client">
  <div class="client-grid">
    <div class="client-player-stats show-info-mobile">

      <div class="client-grid-content">
        <mat-tab-group mat-align-tabs="start">
          <mat-tab label="Score">
            <div class="client-grid-content-data" *ngIf="playerScore">

              <div class="player-info" >



                <h2>{{playerScore?.name}}</h2>

                <p>Level {{playerScore?.level}}, {{playerScore?.gender}}, {{playerScore?.race}},
                  {{playerScore?.className}}</p>
                <p>True Neutral</p>
              </div>
              <hr />
              <table style="width:100%" class="player-info-table">
                <tr>
                  <td>STR:</td>
                  <td>{{playerScore?.attributes.Attribute.Strength}}</td>
                  <td>DEX:</td>
                  <td>{{playerScore?.attributes.Attribute.Dexterity}}</td>
                </tr>
                <tr>
                  <td>CON:</td>
                  <td>{{playerScore?.attributes.Attribute.Constitution}}</td>
                  <td>INT:</td>
                  <td>{{playerScore?.attributes.Attribute.Intelligence}}</td>
                </tr>
                <tr>
                  <td>WIS:</td>
                  <td>{{playerScore?.attributes.Attribute.Wisdom}}</td>
                  <td>CHA:</td>
                  <td>{{playerScore?.attributes.Attribute.Charisma}}</td>
                </tr>
              </table>

              <hr />

              <table style="width:100%" class="player-info-table">
                <tr>
                  <td>Armour:</td>
                  <td>{{playerScore?.armorRating['Armour']}}
                  </td>
                  <td>Avg Dam</td>
                  <td>{{(playerScore?.equipped?.Wielded?.Damage?.Minimum +
                    playerScore?.equipped?.Wielded?.Damage?.Maximum / 2) +
                    playerScore?.attributes?.Attribute?.DamageRoll}}</td>

                </tr>
                <tr>
                  <td>Hit roll:</td>
                  <td>{{playerScore?.attributes.Attribute.HitRoll}}</td>
                  <td>Dam Roll:</td>
                  <td>{{playerScore?.attributes.Attribute.DamageRoll}}</td>
                </tr>
                <tr>
                  <td>Spell Res:</td>
                  <td>{{playerScore?.armorRating['Magic']}}</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
              </table>

              <hr />

              <table style="width:100%" class="player-info-table">
                <tr>
                  <td>Qpoints:</td>
                  <td>{{playerScore?.QuestPoints || 0}}</td>
                  <td>Mob Kills:</td>
                  <td>{{playerScore?.MobKills}}</td>

                </tr>
                <tr>
                  <td>trains:</td>
                  <td>{{playerScore?.Trains}}</td>
                  <td>Mob Deaths:</td>
                  <td>{{playerScore?.MobDeaths}}</td>
                </tr>
                <tr>
                  <td>Prac:</td>
                  <td>{{playerScore?.Practices}}</td>
                  <td>Player Kills:</td>
                  <td>{{playerScore?.PlayerKills}}</td>
                </tr>
                <tr>
                  <td>Weight:</td>
                  <td>{{playerScore?.weight}} lb. /
                    {{playerScore?.attributes.Attribute.Strength *
                    3}} lb.
                  </td>
                  <td>Gold:</td>
                  <td>{{playerScore['Money']['Gold'] == null ? 0 : playerScore['Money']['Gold']}}
                  </td>
                </tr>
              </table>

            </div>

          </mat-tab>
          <mat-tab label="Description">

            <p>{{playerScore?.description}}</p>

            <button mat-raised-button color="secondary" (click)="editDescription()">Edit</button>
          </mat-tab>

        </mat-tab-group>
      </div>
      <div class="client-grid-content">
        <mat-tab-group mat-align-tabs="start">
          <mat-tab label="Inventory">
            <div class="client-grid-content-data" [innerHTML]="inv | safeHtml"></div>
          </mat-tab>
          <mat-tab label="Equipment">
            <div class="client-grid-content-data" [innerHTML]="eq | safeHtml"></div>
          </mat-tab>
          <mat-tab label="Affects">

            <p>You are affected by the following effects:</p>
            <div>

              <table class="simple" style="width:100%">
                <thead>
                  <tr>
                    <td>
                      Skill
                    </td>
                    <td>
                      Affect
                    </td>
                  </tr>
                </thead>
                <tr *ngFor="let aff of affects?.custom">
                  <td>
                    {{aff.name}}
                    <div [innerHTML]="aff.benefits | safeHtml"></div>
                  </td>
                  <td>
                    <p *ngIf="aff.modifier.armour">modifies armour by {{aff.modifier.armour}}<br />
                      for
                      {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.damRoll">modifies damage roll by
                      {{aff.modifier.damRoll}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.hitRoll">modifies hit roll by
                      {{aff.modifier.hitRoll}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.saves">modifies saves by {{aff.modifier.saves}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.hp">modifies hit points by {{aff.modifier.hp}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.mana">modifies mana by {{aff.modifier.mana}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.moves">modifies moves by {{aff.modifier.moves}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.spellDam">modifies spell damage by
                      {{aff.modifier.spellDam}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.strength">modifies strength by
                      {{aff.modifier.strength}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.dexterity">modifies dexterity by
                      {{aff.modifier.dexterity}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.constitution">modifies constitution by
                      {{aff.modifier.constitution}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.intelligence">modifies intelligence by
                      {{aff.modifier.intelligence}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.wisdom">modifies wisdom by {{aff.modifier.wisdom}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>
                    <p *ngIf="aff.modifier.charisma">modifies charisma by
                      {{aff.modifier.charisma}}<br />
                      for {{aff.duration}} cycles, ({{aff.duration / 2}} hours)</p>

                  </td>
                </tr>
              </table>



            </div>
          </mat-tab>
          <mat-tab label="Quests">
            <div class="client-grid-content-data">

              <h3>Active Quests</h3>

              <mat-accordion *ngFor="let q of quest">
                <mat-expansion-panel hideToggle *ngIf="!q.Completed">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{q?.Title}}
                    </mat-panel-title>

                  </mat-expansion-panel-header>
                  <p>Area: {{q?.Area}}</p>
                  <p>Kill:</p>

                  <ol>
                    <li *ngFor="let mob of q.MobsToKill">{{mob.Name}} {{mob.Current}}/{{mob.Count}}
                    </li>
                  </ol>


                  <p>{{q?.Description}}</p>

                  Reward:
                  <ul>
                    <li>{{q?.ExpGain}} Experience points</li>
                    <li>{{q?.GoldGain}} Gold</li>
                    <li *ngFor="let i of q.ItemGain">{{i.name}}</li>
                  </ul>
                </mat-expansion-panel>

              </mat-accordion>

              <h3>Completed Quests</h3>

              <mat-accordion *ngFor="let q of quest">
                <mat-expansion-panel hideToggle *ngIf="q.Completed">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{q?.Title}}
                    </mat-panel-title>

                  </mat-expansion-panel-header>
                  <p>Area: {{q?.Area}}</p>
                  <p>Kill:</p>

                  <ol>
                    <li *ngFor="let mob of q.MobsToKill">{{mob.Name}} {{mob.Current}}/{{mob.Count}}
                    </li>
                  </ol>


                  <p>{{q?.Description}}</p>

                  Reward:
                  <ul>
                    <li>{{q?.ExpGain}} Experience points</li>
                    <li>{{q?.GoldGain}} Gold</li>
                    <li *ngFor="let i of q.ItemGain">{{i.name}}</li>
                  </ul>
                </mat-expansion-panel>

              </mat-accordion>




            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
    <div class="client-window">
      <!-- <button class="ui-buttons" (click)=showInfo()>
                INFO
            </button>
            <button class="ui-button--map ui-buttons">
                MAP
            </button>

            <button class="ui-button--settings ui-buttons">
                CONFIG
            </button> -->

      <app-window></app-window>

    </div>
    <div class="client-game-info">

      <div class="client-grid-content">

        <div id="container" #mapContainer></div>
      </div>
      <div class="client-grid-content">
        <mat-tab-group mat-align-tabs="start">
          <mat-tab label="All">
            <div class="client-grid-content-data">
              <div *ngFor="let msg of channels?.all" [innerHTML]="msg | safeHtml">
              </div>
            </div>
          </mat-tab>
          <mat-tab label="Newbie">
            <div class="client-grid-content-data">
              <div *ngFor="let msg of channels?.newbie" [innerHTML]="msg | safeHtml">
              </div>
            </div>
          </mat-tab>
          <mat-tab label="Gossip">
            <div class="client-grid-content-data">
              <div *ngFor="let msg of channels?.gossip" [innerHTML]="msg | safeHtml">
              </div>
            </div>
          </mat-tab>
          <mat-tab label="Room">
            <div class="client-grid-content-data">
              <div *ngFor="let msg of channels?.room" [innerHTML]="msg | safeHtml">
              </div>
            </div>
          </mat-tab>
          <mat-tab label="OOC">
            <div class="client-grid-content-data">
              <div *ngFor="let msg of channels?.ooc" [innerHTML]="msg | safeHtml">
              </div>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
  </div>
  <div class="client-stats">
    <app-stat-bar [stats]="playerStats.hp" label="Health"></app-stat-bar>
    <app-stat-bar type="mana" [stats]="playerStats.mana" label="Mana"></app-stat-bar>
    <app-stat-bar type="moves" [stats]="playerStats.moves" label="Moves"></app-stat-bar>
    <app-stat-bar type="exp" [stats]="playerStats.exp" [showCurrent]="false" label="XP TNL" class="xp-bar">
    </app-stat-bar>
  </div>
  <div class="client-input">
    <app-input>

      {{time}} <svg (click)="openSettings()" aria-label="change settings" class='settings_trigger' fill="#fff" xmlns="http://www.w3.org/2000/svg"  
      viewBox="0 0 50 50" width="100px" height="100px">
      <path d="M 23.507812 8 C 22.828812 8 22.248812 8.4892031 22.132812 9.1582031 L 21.654297 11.935547 C 20.396297 12.256547 19.211047 12.750484 18.123047 13.396484 L 15.822266 11.771484 C 15.402266 11.468484 14.629203 11.344828 14.033203 11.923828 L 11.923828 14.035156 C 11.443828 14.514156 11.378531 15.270219 11.769531 15.824219 L 13.396484 18.125 C 12.750484 19.213 12.254594 20.39825 11.933594 21.65625 L 9.15625 22.134766 C 8.48825 22.249766 8 22.829812 8 23.507812 L 8 26.492188 C 8 27.171188 8.4892031 27.751188 9.1582031 27.867188 L 11.935547 28.345703 C 12.256547 29.603703 12.750484 30.788953 13.396484 31.876953 L 11.771484 34.177734 C 11.380484 34.731734 11.443828 35.486797 11.923828 35.966797 L 14.035156 38.076172 C 14.541156 38.572172 15.290219 38.611469 15.824219 38.230469 L 18.125 36.603516 C 19.213 37.249516 20.39825 37.745406 21.65625 38.066406 L 22.134766 40.84375 C 22.249766 41.51175 22.829812 42 23.507812 42 L 26.492188 42 C 27.171188 42 27.751188 41.511797 27.867188 40.841797 L 28.345703 38.064453 C 29.603703 37.743453 30.788953 37.247563 31.876953 36.601562 L 34.177734 38.228516 C 34.689734 38.596516 35.428797 38.591219 35.966797 38.074219 L 38.076172 35.964844 C 38.556172 35.485844 38.621469 34.729781 38.230469 34.175781 L 36.603516 31.873047 C 37.249516 30.785047 37.745406 29.60175 38.066406 28.34375 L 40.84375 27.865234 C 41.51175 27.750234 42 27.170188 42 26.492188 L 42 23.507812 C 42 22.829812 41.510797 22.248812 40.841797 22.132812 L 38.064453 21.654297 C 37.743453 20.396297 37.249516 19.211047 36.603516 18.123047 L 38.228516 15.822266 C 38.619516 15.268266 38.556172 14.513203 38.076172 14.033203 L 35.964844 11.923828 C 35.526844 11.488828 34.792781 11.355531 34.175781 11.769531 L 31.875 13.396484 C 30.787 12.750484 29.60175 12.254594 28.34375 11.933594 L 27.865234 9.15625 C 27.750234 8.48825 27.170188 8 26.492188 8 L 23.507812 8 z M 23.507812 9 L 26.492188 9 C 26.685188 9 26.848859 9.1361719 26.880859 9.3261719 L 27.46875 12.742188 C 29.06075 13.083188 30.540875 13.707891 31.921875 14.587891 L 34.753906 12.587891 C 34.895906 12.489891 35.106812 12.481859 35.257812 12.630859 L 37.369141 14.740234 C 37.505141 14.876234 37.523109 15.089094 37.412109 15.246094 L 35.412109 18.076172 C 36.285109 19.391172 36.880812 20.89025 37.257812 22.53125 L 40.673828 23.119141 C 40.863828 23.152141 41 23.315812 41 23.507812 L 41 26.492188 C 41 26.685187 40.862828 26.848859 40.673828 26.880859 L 37.257812 27.46875 C 36.940812 29.02775 36.304109 30.505875 35.412109 31.921875 L 37.412109 34.753906 C 37.523109 34.910906 37.505141 35.121812 37.369141 35.257812 L 35.259766 37.369141 C 35.130766 37.497141 34.926906 37.531109 34.753906 37.412109 L 31.923828 35.412109 C 30.576828 36.288109 29.08975 36.900813 27.46875 37.257812 L 26.880859 40.673828 C 26.847859 40.863828 26.684188 41 26.492188 41 L 23.507812 41 C 23.314812 41 23.151141 40.863828 23.119141 40.673828 L 22.53125 37.257812 C 20.92625 36.916812 19.446125 36.292109 18.078125 35.412109 L 15.246094 37.412109 C 15.107094 37.516109 14.882188 37.511141 14.742188 37.369141 L 12.630859 35.257812 C 12.494859 35.121812 12.476891 34.910906 12.587891 34.753906 L 14.587891 31.921875 C 13.675891 30.477875 13.050187 28.99575 12.742188 27.46875 L 9.3261719 26.880859 C 9.1361719 26.847859 9 26.684188 9 26.492188 L 9 23.507812 C 9 23.315813 9.1361719 23.151141 9.3261719 23.119141 L 12.742188 22.53125 C 13.136188 20.83025 13.740891 19.336125 14.587891 18.078125 L 12.587891 15.246094 C 12.476891 15.089094 12.494859 14.878187 12.630859 14.742188 L 14.740234 12.630859 C 14.873234 12.485859 15.119094 12.488891 15.246094 12.587891 L 18.076172 14.587891 C 19.454172 13.709891 20.93425 13.080187 22.53125 12.742188 L 23.119141 9.3261719 C 23.152141 9.1361719 23.315812 9 23.507812 9 z M 25 18.044922 C 21.159 18.044922 18.044922 21.159 18.044922 25 C 18.044922 28.841 21.159 31.955078 25 31.955078 C 28.841 31.955078 31.955078 28.841 31.955078 25 C 31.955078 21.159 28.841 18.044922 25 18.044922 z M 25 19 C 28.314 19 31 21.686 31 25 C 31 28.314 28.314 31 25 31 C 21.686 31 19 28.314 19 25 C 19 21.686 21.686 19 25 19 z"/></svg>
    
    </app-input>
  </div>
</div>
